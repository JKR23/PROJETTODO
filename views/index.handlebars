<!-- Conteneur pour le header -->
<div id="header-container">
  <h1>Gestionnaire de Tâches</h1>
  <div id="button-container">
    <button id="add-button">Ajouter une tâche</button>
  </div>
</div>

<!-- Conteneur pour les filtres -->
<div id="filters-container">
  <div class="filter-group">
    <label for="filter-priority">Filtrer par priorité:</label>
    <select id="filter-priority">
      <option value="all">Toutes les priorités</option>
      <option value="1">Basse</option>
      <option value="2">Moyenne</option>
      <option value="3">Haute</option>
    </select>
  </div>
  <div class="filter-group">
    <label for="sort-by">Trier par:</label>
    <select id="sort-by">
      <option value="none">Aucun tri</option>
      <option value="created-asc">Date de création (plus ancienne)</option>
      <option value="created-desc">Date de création (plus récente)</option>
      <option value="deadline-asc">Date limite (plus proche)</option>
      <option value="deadline-desc">Date limite (plus éloignée)</option>
    </select>
  </div>
  <button id="apply-filters">Appliquer</button>
  <button id="reset-filters">Réinitialiser</button>
</div>

<!-- Conteneur pour les 4 colonnes -->
<div id="columns">
  <div class="column" id="todo-column">
    <h2>À FAIRE</h2>
    <ul id="todo-list"></ul>
  </div>
  <div class="column" id="in-progress-column">
    <h2>EN COURS</h2>
    <ul id="in-progress-list"></ul>
  </div>
  <div class="column" id="in-review-column">
    <h2>EN RÉVISION</h2>
    <ul id="in-review-list"></ul>
  </div>
  <div class="column" id="done-column">
    <h2>TERMINÉ</h2>
    <ul id="done-list"></ul>
  </div>
</div>

<!-- Modal pour ajouter une tâche -->
<div id="add-task-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" id="close-add-modal">&times;</span>
    <h2>Ajouter une tâche</h2>
    <form id="add-task-form">
      <div>
        <label for="title">Titre</label>
        <input type="text" id="title" name="title" required>
        <span id="error-msg"></span>
      </div>
      <div>
        <label for="description">Description</label>
        <textarea id="description" name="description" required></textarea>
      </div>
      <div>
        <label for="priority">Priorité</label>
        <select id="priority" name="priority" required>
          <option value="">Sélectionner une priorité</option>
          <option value="1">Basse</option>
          <option value="2">Moyenne</option>
          <option value="3">Haute</option>
        </select>
      </div>
      <div>
        <label for="status">Statut</label>
        <select id="status" name="status" required>
          <option value="">Sélectionner un statut</option>
          <option value="1">À faire</option>
          <option value="2">En cours</option>
          <option value="3">En révision</option>
          <option value="4">Terminé</option>
        </select>
      </div>
      <div>
        <label for="assignee">Assigné à</label>
        <select id="assignee" name="assignee" required>
          <option value="">Sélectionner un utilisateur</option>
          <option value="1">Admin</option>
        </select>
      </div>
      <div>
        <label for="due-date">Date d'échéance</label>
        <input type="date" id="due-date" name="due-date" required>
        <span id="error-msg-date"></span>
      </div>
      <button type="submit">Ajouter</button>
    </form>
  </div>
</div>

<!-- Modal pour éditer une tâche -->
<div id="edit-task-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" id="close-edit-modal">×</span>
    <h2>Modifier la tâche</h2>
    <form id="edit-task-form">
      <input type="hidden" id="edit-task-id">
      
      <div>
        <label for="edit-title">Titre</label>
        <input type="text" id="edit-title" name="edit-title" required>
        <span id="edit-error-msg"></span>
      </div>

      <div>
        <label for="edit-description">Description</label>
        <textarea id="edit-description" name="edit-description" required></textarea>
      </div>

      <div>
        <label for="edit-priority">Priorité</label>
        <select id="edit-priority" name="edit-priority" required>
          <option value="">Sélectionner une priorité</option>
          <option value="1">Basse</option>
          <option value="2">Moyenne</option>
          <option value="3">Haute</option>
        </select>
      </div>

      <div>
        <label for="edit-status">Statut</label>
        <select id="edit-status" name="edit-status" required>
          <option value="">Sélectionner un statut</option>
          <option value="1">À faire</option>
          <option value="2">En cours</option>
          <option value="3">En révision</option>
          <option value="4">Terminé</option>
        </select>
      </div>

      <div>
        <label for="edit-assignee">Assigné à</label>
        <select id="edit-assignee" name="edit-assignee" required>
          <option value="">Sélectionner un utilisateur</option>
          <option value="1">Admin</option>
        </select>
      </div>

      <div>
        <label for="edit-due-date">Date d'échéance</label>
        <input type="date" id="edit-due-date" name="edit-due-date" required>
        <span id="edit-error-msg-date"></span>
      </div>
      
      <!-- Boutons fixes en bas -->
      <div class="form-buttons">
        <button type="submit" id="edit-task-button">
          <i class="fa-solid fa-pen-to-square"></i> Modifier
        </button>
        <button type="button" id="delete-task">
          <i class="fa-solid fa-trash"></i> Supprimer
        </button>
      </div>
    </form>
  </div>
</div>


<!-- Modal pour afficher l'historique d'une tâche -->
<div id="history-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn" id="close-history-modal">&times;</span>
    <h2>Historique de la tâche</h2>
    <div id="history-container">
      <table id="history-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Action</th>
            <th>Modifié par</th>
            <th>Détails</th>
          </tr>
        </thead>
        <tbody id="history-list">
          <!-- Les entrées d'historique seront ajoutées ici dynamiquement -->
        </tbody>
      </table>
    </div>
  </div>
</div>